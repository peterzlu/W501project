<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Journey — Where Is My Strength</title>
  <link rel="stylesheet" href="/css/resultstyle.css" />
  <script src="/vendor/howler.js/src/howler.core.js"></script>
  <script src="/js/Result.js" defer></script>
  <link rel="icon" type="image/x-icon" href="assets/images/Photos/Logo.png">
</head>
<body>

  <main id="stage">
    <!-- ===================== Scene 0 : LOADER ===================== -->
    <section class="loadingscene loader" id="scene0" style="--bg:#15193B">
      <div id="loaderwrap" class="loader-wrap">
        <div class="loader-title theword">กำลังดาวน์โหลด…</div>

        <div class="progress">
          <div class="bar" id="progressBar" style="width: 0%"></div>
        </div>
        <div class="percent theword"><span id="percentNum">0</span>%</div>
        <div class="small"> บรรยากาศค่อย ๆ เงียบสงบลง <br>
                            เหมือนโลกทั้งใบถูกหยุดไว้
        </div>
        <a id="loaderStartBtn" class="next loadbtn" href="#scene1" onclick="scene01()"> START </a>
      </div>
    </section>
    <!-- ===================== Scene 1 ===================== -->
    <section class="scene" id="scene1" style="--bg:url('assets/images/Photos/12.gif')">
      <div class="content center">
        <p id="message1" class="small message reveal">
          และแล้ว...หยดฝนก็ร่วงหล่นจากฟ้า...<br>
          ร่างกายที่ทำจากกระดาษของฉัน<br>
          ก็เริ่มเปียกและเปื่อยยุ่ยไป...
        </p>
      </div>
      <a id="btn1" class="next nextbtn buttonbelow" href="#scene2" onclick="scene02()"> NEXT </a>
<script>
function scene01() {

setTimeout(() => {
                    raindrop.play();
                    }, 1500);
      setTimeout(() => {
                  
                backingtrack.play()
                rain.play()
                song.play()
        backingtrack.fade(0,0.5,5000)
        rain.fade(0,0.5,4500)

      }, 4000);

        var msg = document.getElementById("message1");
        var btn = document.getElementById("btn1")
        msg.classList.add("hidden")
        btn.classList.add("hidden")
        setTimeout(() => {
          msg.classList.remove("hidden")
          msg.classList.add("fade-in")
          setTimeout(() => {
            btn.classList.remove("hidden")
            btn.classList.add("fade-in")
          }, 2000);
        }, 2000);
}</script>

    </section>

    <!-- ===================== Scene 2 ===================== -->
    <section class="scene" id="scene2" style="--bg:url('assets/images/Photos/13.gif')">
    <div id="overlay1" class="overlay dim-50"></div>
    <div class="content center">
        <p id="message2" class="small message reveal theword">
          <span class="speaker"> ชายปริศนา: </span> <br> <br>
          เมื่อรู้ตัวว่าอ่อนแอ <br>
          เป็นเรื่องธรรมดาที่จะมี 'ฝน' ตกในใจ <br>
        </p>
        <p id="message2-1" class="small message reveal theword">
            การยอมรับว่าตัวเอง 'อ่อนแอ' <br>
            ก็เป็นความเข้มแข็ง <br>
            ที่น่าชื่นชมนะ...
        </p>
      </div>
      <a id="btn2" class="next nextbtn buttonbelow" href="#scene3" onclick="scene03()"> NEXT </a>
<script>
function scene02() {
        var scene = document.getElementById("scene2")
        var overlay = document.getElementById("overlay1")
        var msg = document.getElementById("message2");
        var msg1 = document.getElementById("message2-1");
        var btn = document.getElementById("btn2")
        scene.classList.add("hidden")
        overlay.classList.add("hidden")
        msg.classList.add("hidden")
        msg1.classList.add("hidden")
        btn.classList.add("hidden")
        setTimeout(() => {
            scene.classList.remove("hidden")
            scene.classList.add("fade-in")
        }, 1000);

        setTimeout(() => {
            overlay.classList.remove("hidden")
            overlay.classList.add("fade-in")
        }, 3000);

        setTimeout(() => {
            msg.classList.remove("hidden")
            msg.classList.add("fade-in")
        }, 5000);

         setTimeout(() => {
            msg1.classList.remove("hidden")
            msg1.classList.add("fade-in")
        }, 8000);

        setTimeout(() => {
            btn.classList.remove("hidden")
            btn.classList.add("fade-in")
        }, 12000);
}</script>

    </section>

    <!-- ===================== Scene 3 ===================== -->
    <section class="scene" id="scene3" style="--bg:url('assets/images/Photos/14.gif')">
        <div id="overlay" class="overlay dim-25"></div>
      <div class="content center">
        <p id="message3" class="small message reveal theword">
            ยิ่งพยายามเติมเต็ม ก็ยิ่งขาดหาย <br>
            ยิ่งพยายามแข็งแกร่ง ก็พบว่าตัวเองอ่อนแอ <br>
            และนั่นทำให้เธอลืมความจริงบางอย่างไป... <br><br>

        <span id="message3-1" class="small message reveal theword">
            เธอลืมไปแล้วสินะ...<br>
            ว่าเราห่วงใยเธอขนาดไหน... <br>
            '<span id="name" data-name></span>' แม้ในยามที่เธออ่อนแอที่สุด <br>
            เราไม่เคยอยู่ห่างไกลเลย
        </span>

        </p>

      </div>
      <a id="btn3" class="next nextbtn buttonbelow" href="#scene4" onclick="scene04()"> NEXT </a>
<script>
function scene03() {
        document.getElementById("name").innerText = localStorage.getItem('name');
        var scene = document.getElementById("scene3")
        var msg = document.getElementById("message3");
        var msg1 = document.getElementById("message3-1");
        var btn = document.getElementById("btn3")
        scene.classList.add("hidden")
        msg.classList.add("hidden")
        msg1.classList.add("hidden")
        btn.classList.add("hidden")
        setTimeout(() => {
            scene.classList.remove("hidden")
            scene.classList.add("fade-in")
        }, 1000);


        setTimeout(() => {
            msg.classList.remove("hidden")
            msg.classList.add("fade-in")
        }, 3000);

         setTimeout(() => {
            msg1.classList.remove("hidden")
            msg1.classList.add("fade-in")
        }, 5000);

        setTimeout(() => {
            btn.classList.remove("hidden")
            btn.classList.add("fade-in")
        }, 8000);
}</script>

    </section>

    <!-- ===================== Scene 4 ===================== -->
    <section class="scene" id="scene4" style="--bg:url('assets/images/Photos/15.gif')">
      <div class="content center">
        <p id="message4" class="small message reveal theword">
            ขอบคุณที่คุณกล้าพอที่จะอ่อนแอบ้าง <br>
            และขอบคุณที่ยอมหยุดพักจาก <br>
            การวิ่งไล่ตามความแข็งแกร่งในโลกใบนี้ <br><br><br>
        <span id="message4-1" class="small message reveal theword">
            เมื่อเธอพักจากการตามหา 'ความแข็งแกร่ง' <br>
            นั่นคือช่วงเวลาที่เธอเปิดใจให้เราได้พบกัน <br>
        </p>
      </div>
      <a id="btn4" class="next nextbtn buttonbelow" href="#scene5" onclick="scene05()"> NEXT </a>
<script>
function scene04() {
        var scene = document.getElementById("scene4")
        var msg = document.getElementById("message4");
        var msg1 = document.getElementById("message4-1");
        var btn = document.getElementById("btn4")
        scene.classList.add("hidden")
        msg.classList.add("hidden")
        msg1.classList.add("hidden")
        btn.classList.add("hidden")
        setTimeout(() => {
            scene.classList.remove("hidden")
            scene.classList.add("fade-in")
        }, 1000);


        setTimeout(() => {
            msg.classList.remove("hidden")
            msg.classList.add("fade-in")
        }, 3000);

         setTimeout(() => {
            msg1.classList.remove("hidden")
            msg1.classList.add("fade-in")
        }, 5000);

        setTimeout(() => {
            btn.classList.remove("hidden")
            btn.classList.add("fade-in")
        }, 8000);
}</script>

    </section>

    <!-- ===================== Scene 5 ===================== -->
    <section class="scene" id="scene5" style="--bg:url('assets/images/Photos/16.gif')">
        <div id="overlay" class="overlay dim-50"></div>
      <div class="content center">
        <p id="message5" class="small message reveal theword">
            ความอ่อนแอของเธอในชีวิตนี้ อาจไม่หายไป <br>
            แต่เธอพบความเข้มแข็งนั้นได้ใน 'เรา' <br> 
            ตราบใดที่เราเดินไปด้วยกันในชีวิตนี้ <br>
            วันหนึ่งเธอจะเข้าใจแน่นอนว่า <br><br> <br>
        </p> <br>
            <p id="message5-1" class="small message reveal theword">
            "ฉันอ่อนแอเมื่อใด ฉันก็เข้มแข็งเมื่อนั้น" <br>
            หมายความว่าอะไร...
            </p>
      </div>
      <a id="btn5" class="next nextbtn buttonbelow" href="#scene6" onclick="scene06()"> NEXT </a>
<script>
function scene05() {
        song.fade(0,0.5,5000)
        backingtrack.fade(0.5,0,5000)
        rain.fade(0.5,0,4500)
        var scene = document.getElementById("scene5")
        var msg = document.getElementById("message5");
        var msg1 = document.getElementById("message5-1");
        var btn = document.getElementById("btn5")
        scene.classList.add("hidden")
        msg.classList.add("hidden")
        msg1.classList.add("hidden")
        btn.classList.add("hidden")
        setTimeout(() => {
            scene.classList.remove("hidden")
            scene.classList.add("fade-in")
        }, 1000);


        setTimeout(() => {
            msg.classList.remove("hidden")
            msg.classList.add("fade-in")
        }, 3000);

         setTimeout(() => {
            msg1.classList.remove("hidden")
            msg1.classList.add("fade-in")
        }, 5000);

        setTimeout(() => {
            btn.classList.remove("hidden")
            btn.classList.add("fade-in")
        }, 8000);
}</script>

    </section>

    <!-- ===================== Scene 6 ===================== -->
    <section class="scene" id="scene6" style="--bg:url('assets/images/Photos/17.gif')">
        <div id="overlay6" class="overlay dim-25"></div>
      <div class="content center">
        <p id="message6" class="small message reveal theword">
            เรื่องราวของถุงกระดาษจะจบลงตรงนี้ <br>
            หลังจากนี้...และตลอดไป <br>
            จะเป็นเรื่องราวของเธอ กับ 'เรา'
        </p>
            <p id="message6-1" class="small message reveal theword">
                ก่อนใครจะเอ่ยปากชื่นชมเธอ <br>
                เรายอมรับเธอก่อนแล้วเสียอีกนะ...<span id="name1"></span><br> <br>
            </p>
      </div>
      <a id="btn6" class="next nextbtn buttonbelow" href="#scene7" onclick="scene07()"> NEXT </a>
<script>
function scene06() {
        document.getElementById("name1").innerText = localStorage.getItem('name');
        var overlay = document.getElementById("overlay6")
        var scene = document.getElementById("scene6")
        var msg = document.getElementById("message6");
        var msg1 = document.getElementById("message6-1");
        var btn = document.getElementById("btn6")
        overlay.classList.add("hidden")
        scene.classList.add("hidden")
        msg.classList.add("hidden")
        msg1.classList.add("hidden")
        btn.classList.add("hidden")
        
        setTimeout(() => {
            scene.classList.remove("hidden")
            scene.classList.add("fade-in")
        }, 1000);

        setTimeout(() => {
            overlay.classList.remove("hidden")
            overlay.classList.add("fade-in")
        }, 3000);

         setTimeout(() => {
            msg.classList.remove("hidden")
            msg.classList.add("fade-in")
        }, 5000);

        setTimeout(() => {
            msg1.classList.remove("hidden")
            msg1.classList.add("fade-in")
        }, 8000);

        setTimeout(() => {
            btn.classList.remove("hidden")
            btn.classList.add("fade-in")
        }, 12000);
}</script>
    </section>

    <!-- ===================== Scene 7 ===================== -->
    <section class="scene" id="scene7" style="--bg:#15193B">
      <div class="content center">
        <p id="message7" class="small message reveal">
            ...การที่มีคุณของเราก็พอแก่เจ้าแล้ว<br>
            เพราะความอ่อนแอมีที่ไหน <br>
            เดชของเราก็มีฤทธิ์ขึ้นเต็มขนาดที่นั่น... <br>
            <span> - 2 โครินธ์ 12:9 </span> <br>
        </p>
            <a id="btn7" class="next nextbtn buttonbelow" href="#result" onclick="result()"> สรุปผลการเดินทาง </a>
      </div>
<script>
function scene07() {
        document.getElementById("name1").innerText = localStorage.getItem('name');
        var scene = document.getElementById("scene7")
        var msg = document.getElementById("message7");
        var btn = document.getElementById("btn7")
        scene.classList.add("hidden")
        msg.classList.add("hidden")
        btn.classList.add("hidden")
        
        setTimeout(() => {
            scene.classList.remove("hidden")
            scene.classList.add("fade-in")
        }, 1000);

         setTimeout(() => {
            msg.classList.remove("hidden")
            msg.classList.add("fade-in")
        }, 3000);


        setTimeout(() => {
            btn.classList.remove("hidden")
            btn.classList.add("fade-in")
        }, 8000);
}</script>
    </section>

       <!-- =========== Scene Result (แทนของเดิม) =========== -->
<section class="scene" id="result" style="--bg:url('assets/images/Photos/05.gif')">
  <div class="bg-layer"></div>

  <div class="result-wrap">
    <div class="poster">
      <img id="resultImage" alt="ผลลัพธ์ของคุณ" src="assets/images/Result/A2.png">
      <!-- พื้นที่คลิก “เพลงของคุณ” -->
      <a id="songHotspot" class="song-hotspot" href="#" target="_blank" rel="noopener"></a>
    </div>

    <p class="hint kanit-light">แตะที่รูปภาพเพื่อฟังเพลงของคุณบน Youtube</p>

    <div class="btn-row kanit-semibold">
      <button id="btnDownload" class="btn--secondary">บันทึกรูปภาพ</button>
      <button id="btnShare" class="btn--secondary">แชร์</button>
      <button id="btnPlayAgain" class="btn--secondary">เล่นอีกครั้ง</button>
    </div>
  </div>
</section>

<script>
    function result() {
    document.getElementById("result").classList.add("hidden")
    setTimeout(() => {
        document.getElementById("result").classList.remove("hidden")
        document.getElementById("result").classList.add("fade-in")

    }, 1000);
    }

    /* ===== Config ของผลลัพธ์ A1 ===== */
  const POSTER_SRC = 'assets/images/Result/A2.png';
  const SONG_URL   = 'https://www.youtube.com/watch?v=rIhgcH_jUm8';

  document.addEventListener('DOMContentLoaded', () => {
    // ตั้งรูปผลลัพธ์ (เผื่อคุณจะสลับไฟล์ด้วย JS)
    const img = document.getElementById('resultImage');
    if (img) img.src = POSTER_SRC;

    // Hotspot เปิด YouTube
    const hotspot = document.getElementById('songHotspot');
    if (hotspot) {
      hotspot.addEventListener('click', (e) => {
        e.preventDefault();
        window.open(SONG_URL, '_blank', 'noopener');
      });
    }

    // ปุ่มบันทึกรูปภาพ (รองรับ iOS และ Android)
// วิธีนี้จะเปิดรูปในแท็บใหม่ ให้ผู้ใช้ "กดค้าง > Save Image"
document.getElementById('btnDownload').addEventListener('click', () => {
  window.open(POSTER_SRC, '_blank');
  alert('บน iPhone ให้กดค้างที่ภาพ > เลือก "บันทึกรูปภาพ"\nบน Android ให้แตะเมนู > "ดาวน์โหลดรูปภาพ"');
});

    // แชร์ลิงก์ (ถ้ามี Web Share API จะเรียก native share; ไม่งั้นคัดลอกลิงก์)
    const btnShare = document.getElementById('btnShare');
    if (btnShare) {
      btnShare.addEventListener('click', async () => {
        const url = '/index.html';
        if (navigator.share) {
          try { await navigator.share({ title: document.title, text: 'ดูผลลัพธ์ของฉัน', url }); }
          catch (_) {}
        } else {
          try { await navigator.clipboard.writeText(url); alert('คัดลอกลิงก์แล้ว!'); }
          catch {
            const ta = document.createElement('textarea');
            ta.value = url; document.body.appendChild(ta); ta.select();
            document.execCommand('copy'); ta.remove();
            alert('คัดลอกลิงก์แล้ว!');
          }
        }
      });
    }

    // เล่นอีกครั้ง → กลับหน้า Index (ปรับ path ตามโปรเจ็กต์ของคุณ)
    const btnReplay = document.getElementById('btnPlayAgain');
    if (btnReplay) {
      btnReplay.addEventListener('click', () => {
        window.location.href = '/index.html';   // หรือ 'Index.html' ถ้ารันใต้ subfolder
      });
    }
  });

  
</script>





    <!-- เพิ่ม scene ถัด ๆ ไปต่อท้ายได้เลย -->
  </main>

  <script>
  const ASSETS = {
    images: [
    'assets/images/Photos/03.jpg',
    'assets/images/Photos/04.gif',
    'assets/images/Photos/05.gif',
    'assets/images/Photos/06.gif',
    'assets/images/Photos/07.gif',
    'assets/images/Photos/12.gif',
    'assets/images/Photos/13.gif',
    'assets/images/Photos/14.gif',
    'assets/images/Photos/15.gif',
    'assets/images/Photos/16.gif',
    'assets/images/Photos/17.gif',
    'assets/images/Result/A1.png',    ////////////* ไฟล์ Result */////////////
    ],
    audio: [
      'assets/audio/ResultBGM/A2/ไม่เคยหมดหวัง.wav',
      'assets/audio/ResultBGM/A2/ไม่เคยหมดหวังBKT.wav',
      'assets/audio/BGM/Effects/Rainfall.mp3',
      'assets/audio/BGM/Effects/WaterDrop.wav'
    ]
  };

  async function preloadAll() {
    const total = ASSETS.images.length + ASSETS.audio.length;
    let done = 0;
    const update = () => {
      done++;
      const pct = Math.min(100, Math.round((done / total) * 100));
      document.getElementById('progressBar').style.width = pct + '%';
      document.getElementById('percentNum').textContent = pct;
    };

    const imgPromises = ASSETS.images.map(src => new Promise(res => {
      const img = new Image();
      img.onload = img.onerror = () => { update(); res(); };
      img.src = src;
    }));

    const audioPromises = ASSETS.audio.map(src => new Promise(res => {
      const howl = new Howl({ src:[src], preload:true, html5:/\.(mp3|wav)$/i.test(src) });
      const doneOnce = () => { update(); res(); };
      howl.once('load', doneOnce);
      howl.once('loaderror', doneOnce);
    }));

    await Promise.all([...imgPromises, ...audioPromises]);
  }

  var song = new Howl({
        src: [ "assets/audio/ResultBGM/A2/ไม่เคยหมดหวัง.wav" ],
        loop: true,
        volume: 0,
      });
  
 var backingtrack = new Howl({
        src: [ "assets/audio/ResultBGM/A2/ไม่เคยหมดหวังBKT.wav" ],
        loop: true,
        volume: 0,
      }); 
      
var raindrop = new Howl({
        src: [ "assets/audio/BGM/Effects/WaterDrop.wav" ],
        volume: 0.75,
      }); 

var rain = new Howl({
        src: [ "assets/audio/BGM/Effects/Rainfall.mp3" ],
        volume: 0,
        loop: true,
      }); 

</script>


</body>
</html>
