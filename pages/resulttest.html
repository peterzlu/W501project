<!DOCTYPE html>
<html lang="th">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, viewport-fit=cover" />
    <title>Where is my strength...</title>
    <link rel="icon" type="image/png" href="/Media/Photos/Logo.png">
    <link rel="stylesheet" href="/css/teststyle.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Itim&family=Kanit:wght@300;400;600;700&display=swap"
      rel="stylesheet" />
  </head>
  <body data-page="A1">
    <div id="stage">
      <style>
    /* เพิ่มสไตล์เฉพาะหน้านี้ */
    .result-wrap{
      position:relative; width:100%; height:100%;
      display:flex; flex-direction:column; align-items:center; justify-content:center;
      padding: var(--padY) var(--padX);
    }
    .poster{
      position:relative;
      width:min(92%, 640px);
      aspect-ratio: 9 / 16;         /* กรอบแนวตั้งคล้ายตัวอย่าง */
      overflow:hidden;
      background:#111;
      box-shadow: 0 6px 24px rgba(0,0,0,.45);
    }
    .poster > img{
      position:absolute; inset:0; width:100%; height:100%; object-fit:cover;
      display:block;
    }
    /* Hotspot “เพลงของคุณ” (ครอบเฉพาะมุมรูปตามภาพตัวอย่าง) */
    .song-hotspot{
      position:absolute;
      right: clamp(10px, 3vmin, 18px);
      bottom: clamp(10px, 3vmin, 18px);
      width: clamp(84px, 28%, 160px);
      aspect-ratio: 1 / 1;      /* สี่เหลี่ยมจัตุรัสคร่าว ๆ ตามช่องปกเพลง */
      cursor:pointer;
      background: rgba(255,255,255,0.01);
      outline: 2px dashed rgba(255,255,255,.0); /* มองไม่เห็น, ไว้ดีบักค่อยเปิด */
    }
    .hint{
      color:white; font-size: clamp(12px, 1.5vmin + .2vw, 14px);
      text-align:center; margin-top: 0.75rem;
    }
    .btn-row{
      display:flex; gap:12px; width: min(92%, 640px);
      justify-content:center; flex-wrap:wrap;
      margin-top: 6px;
    }
    .btn--secondary{
      background:white; border:1px solid var(--chip);
      color:#202020; border-radius:14px; padding:.9em 1.2em; font-weight:700;
      cursor:pointer; font-size: clamp(14px, 2vmin, 18px);
    }
    .btn--secondary:active{ transform: translateY(1px); }

    .bg-layer {
  position:absolute; inset:0;
  background-image: url("/assets/images/Photos/04.gif");
  -webkit-background-size: cover;
  -moz-background-size: cover; 
  -o-background-size: cover;
  background-size: cover; 
  opacity:1;
  z-index: 0;
    background-position: center; }
  </style>


 <div id="stage-inner" aria-label="Portrait canvas locked 9:16">
      <div id="stage-content" class="fade-in">
          <div class="bg-layer"></div>
        <div class="result-wrap fade-in-slower">
          <!-- กรอบรูปผลลัพธ์ -->
          <div class="poster fade-in-slow">
            <!-- เปลี่ยนเป็นพาธรูปจริงของคุณ -->
            <img id="resultImage" alt="ผลลัพธ์ของคุณ" src="/assets/images/Result/A1.png">
            <!-- พื้นที่คลิก “เพลงของคุณ” -->
            <a id="songHotspot" class="song-hotspot" href="#" target="_blank" rel="noopener"></a>
          </div>

          <p class="hint kanit-light">แตะที่รูปภาพเพื่อฟังเพลงของคุณบน Youtube</p>

          <!-- ปุ่ม -->
          <div class="btn-row kanit-semibold">
            <button id="btnDownload" class="btn--secondary kanit-semibold">บันทึกรูปภาพ</button>
            <button id="btnShare" class="btn--secondary kanit-semibold">แชร์</button>
            <button id="btnPlayAgain" class="btn--secondary kanit-semibold">เล่นอีกครั้ง</button>
          </div>
        </div>
      </div>
    </div> 
  
    </div>

    <script>
        // === ตั้งค่าพาธรูปและลิงก์เพลงของคุณที่นี่ ===
    const POSTER_SRC = '/assets/images/Result/A1.png';        // รูปภาพผลลัพธ์
    const SONG_URL   = 'https://www.youtube.com/watch?v=UmLKWfTys3s&list=RDUmLKWfTys3s&start_radio=1'; // ลิงก์เพลง

    // เซ็ต src เผื่ออยากสลับรูปภายหลังด้วย JS
    document.getElementById('resultImage').src = POSTER_SRC;

    // พื้นที่ “เพลงของคุณ” → เปิดลิงก์ภายนอก
    const hotspot = document.getElementById('songHotspot');
    hotspot.addEventListener('click', (e)=>{
      e.preventDefault();
      window.open(SONG_URL, '_blank', 'noopener');
    });

    // ดาวน์โหลดรูปภาพ
    document.getElementById('btnDownload').addEventListener('click', async ()=>{
      try{
        // ถ้าไฟล์อยู่โดเมนเดียว: ดาวน์โหลดได้ตรง ๆ ด้วย <a download>
        const a = document.createElement('a');
        a.href = POSTER_SRC;
        a.download = 'result.png';
        document.body.appendChild(a);
        a.click();
        a.remove();
      }catch(err){
        alert('ดาวน์โหลดไม่สำเร็จ ลองใหม่อีกครั้ง');
        console.error(err);
      }
    });

    // แชร์ลิงก์ (ถ้า Web Share ใช้ได้จะเรียก native share; ไม่งั้นคัดลอกลิงก์)
    document.getElementById('btnShare').addEventListener('click', async ()=>{
      const url = window.location.href;
      if (navigator.share){
        try{
          await navigator.share({ title: document.title, text: 'ดูผลลัพธ์ของฉัน', url });
        }catch(e){ /* ผู้ใช้ยกเลิก */ }
      }else{
        try{
          await navigator.clipboard.writeText(url);
          alert('คัดลอกลิงก์แล้ว!');
        }catch{
          // fallback เก่าสุด
          const ta = document.createElement('textarea');
          ta.value = url; document.body.appendChild(ta); ta.select();
          document.execCommand('copy'); ta.remove();
          alert('คัดลอกลิงก์แล้ว!');
        }
      }
    });

    // fix 100vh บนมือถือ (ใช้กับ CSS ตัวเดิมของคุณ)
    function setVH(){ document.documentElement.style.setProperty('--vh', (window.innerHeight * 0.01) + 'px'); }
    setVH(); window.addEventListener('resize', setVH);
    </script>
    <noscript>กรุณาเปิดใช้งาน JavaScript</noscript>
    <script src="/Files/app.js" defer></script>
    <script src="/howler.js/src/howler.core.js"></script>
  </body>
</html>
